{{- /* Styles */}}

{{- $theme_vars :=slice (resources.Get "scss/core/theme-vars.scss") }}
{{- $reset :=slice (resources.Get "scss/core/reset.scss") }}
{{- $common := (resources.Match "scss/common/*.[s ]css") }}

{{- /* markup.highlight.noClasses should be set to `false` */}}
{{- $code_styles :=slice (resources.Get "scss/includes/syntax-light.scss") }}

{{- $extended := (resources.Match "scss/extended/*.[s ]css") }}

{{- /* order is important */}}
{{- $styles := (slice $theme_vars $reset $common $code_styles $extended) }}

{{- /* bundle all required css */}}
{{- /* Add extended css after theme style */ -}}

{{- if eq hugo.Environment "development" }}
  {{ range $styles }}
    {{ range . }}
      {{- $sss := . | resources.ToCSS }}
      <link
        crossorigin="anonymous"
        href="{{ $sss.RelPermalink }}"
        rel="preload stylesheet"
        as="style"
      />
    {{ end }}
  {{ end }}
{{- else }}
  {{ $stylesheets := slice }}

  {{ range $sty := $styles }}
    {{ $stylesheets = $stylesheets | collections.Append $sty }}
  {{ end }}

  {{- $stylesheet := $stylesheets | resources.ToCSS | resources.Concat "assets/css/stylesheet.css" | resources.Minify | fingerprint }}
  <link
    crossorigin="anonymous"
    href="{{ $stylesheet.RelPermalink }}"
    integrity="{{ $stylesheet.Data.Integrity }}"
    rel="preload stylesheet"
    as="style"
  />
{{- end }}
